
<!-- Shipping Info Modal -->
<div id="shipping_info" class="modal">
    <div class="header-title" k="អាស័យដ្ឋានដឹកជញ្ជូន">Delivery Address</div>
    <div class="back" onclick="closeModal('shipping_info')">
        <span class="close ion-ios-close-empty"></span>
    </div>
    <div class="lg">
        <div class="cc">
            <form id="shipping_info_form">
                <div class="d">
                    <div class="e"><span class="ion-ios-person-outline"></span></div>
                    <div class="f"><input id="name" k="ឈ្មោះ" placeholder="Name" type="text">
                        <span style="display:none" class="input-close ion-ios-close-outline"></span>
                    </div>
                </div>
                <div class="d">
                    <div class="e"><span class="ion-ios-telephone"></span></div>
                    <div class="f"><input id="phone_number" k="ទូរស័ព្ទ" placeholder="Phone Number" type="number" pattern="\d*">
                        <span style="display:none" class="input-close ion-ios-close-outline"></span>
                    </div>
                </div>
                <div class="d">
                    <div class="e"><span class="ion-ios-location-outline"></span></div>
                    <div class="f"><span id="location" class="f2" onclick="openSmallModal('choose_location')">Phnom Penh</span></div>
                    <div class="f1"><span class="fa fa-angle-right"></span></div>                                                    
                </div>
                <div class="my-tab">
                    <div class="a selected" id="tab-address" onclick="selectTab('tab-address')">
                        <span>ADDRESS</span>
                    </div>
                    <div class="a" id="tab-gps" onclick="selectTab('tab-gps'); getLocation()">
                        <span>GPS</span>
                    </div>
                </div>
                <div class="my-tab-content">
                    <div class="a" id="tab-address">
                        <div class="d">                    
                            <div class="f">
                                <input id="address" k="អាស័យដ្ឋាន (ឧ: ផ្ទះលេខ 41 ផ្លូវ 126)" placeholder="Address (ex: No. 41, St. 126)">
                                <span style="display:none" class="input-close ion-ios-close-outline"></span>
                            </div>
                        </div>
                        <div class="d">   
                            <div class="f"><input id="near_by" k="នៅជិត (ឧ: នៅជិតផ្សារធំថ្មី)" placeholder="Nearby (ex: Near Phsar Thom Thmey)">
                                <span style="display:none" class="input-close ion-ios-close-outline"></span>
                            </div>
                        </div>
                        
                    </div>
                    <div class="a hide" id="tab-gps">
                        <div class="getting-gps" k="កំពុងទាញយកទីតាំងបច្ចុប្បន្នរបស់អ្នក ...">Getting your Current Location ...</div>
                        <iframe allow="geolocation" id="gps-map-frame" style="width:100%;height:250px" frameborder="0"
                            src="">
                        </iframe>
                        <input id="coordinate" type="hidden">
                    </div>
                </div>
                <div class="g">
                    <button type="submit" onclick="postAddress()" k="ផ្ញើរមកកាន់អាស័យដ្ឋាននេះ">Deliver to this Address</button>               
                </div>
            </form>
            
        </div>            
    </div>      
</div>
<!-- /Shipping Info Modal -->

<div class"app-header">
    <div class="header-title" k="អាស័យដ្ឋានដឹកជញ្ជូន">Shipping Address</div>
    <div class="back" ng-click="myGoBack()">
        <span class="ion-ios-arrow-left"></span>
    </div>
</div>
<ion-view hide-nav-bar="true" class="header-view">
    <ion-content>
        <div class="qw">
            <ul id="shipping_address">
            <script>/*
                <li class="item item-complex">
                    <a class="item-content">
                        <strong id="name">Vong Virak</strong><br>
                        <span id="address">No. 45, St. 123</span><br>
                        <span id="coordinate">132.554433,90.321323</span><br>
                        <span id="location">Phnom Penh</span><br>
                        <span>Near by:</span> <span id="near_by">Phsar Thom Thmey</span><br>            
                        <span>Tel:</span> <span id="phone_number">011992883</span>
                        <span class="fa fa-angle-right"></span>
                    </a>                
                </li>
                */</script>
            </ul>
            <div class="t">
                <button class="btn" onclick="openModal(\'shipping_info\')">Add new Address</button>
            </div>
        </div>
    </ion-content>
</ion-view>
<script>
    var user_id = localStorage.getItem('user_id');
    
    $.post('http://nekoten.khmerqq.com/app/shipping_address.php', {user_id:user_id}, function(data){
        var a = JSON.parse(data);
        
        if (a.length == 0){            
            var str = '<div class="u">';
            if (lang == 'en') str += 'No Shipping Address'; else str += 'គ្មានអាស័យដ្ឋានដឹកជញ្ជូន';            
            str += '</div>';
            $('.qw #shipping_address').html(str);
        }
        for (var i = 0; i < a.length; i++){
            var b = a[i];
            var str = '<li class="item item-complex">';
                str += '<a class="item-content">';
                    str += '<strong id="name">'+b['name']+'</strong><br>';
                    str += '<span id="address">'+b['address']+'</span><br>';
                    str += '<span id="coordinate">'+b['coordinate']+'</span><br>';
                    str += '<span id="location">'+b['location']+'</span><br>';
                    str += '<span>Near by:</span> <span id="near_by">'+b['near_by']+'</span><br>';
                    str += '<span>Tel:</span> <span id="phone_number">'+b['phone_number']+'</span>';
                    str += '<span class="fa fa-angle-right"></span>';
                str += '</a>';
            str += '</li>';
            $('.qw #shipping_address').append(str);
        }
    });  
    
</script>